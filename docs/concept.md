---
sidebar_position: 2
---

# â­ æ¶æ„æ€»è§ˆ â€” ä¸‡èƒ½ä¸–ç•Œæ¨¡æ‹Ÿå¼•æ“ï¼ˆUniversal Simulation Engineï¼‰

---

## ğŸŸ¥ ç¬¬ 1 å±‚ï¼šEngine Coreï¼ˆå¼•æ“æ ¸å¿ƒå±‚ï¼‰

**å¼•æ“æ ¸å¿ƒå±‚ = å®Œå…¨æŠ½è±¡ã€å¹²å‡€ã€æ— ä»»ä½•ä¸–ç•Œé€»è¾‘ã€‚
æ‰€æœ‰ä¸–ç•Œè§„åˆ™éƒ½å¿…é¡»é€šè¿‡ Extension æä¾›ã€‚**

### â­ æ ¸å¿ƒæ¨¡å—ï¼ˆé€šç”¨ã€å¯å¤ç”¨ï¼‰

* **Time Engine**ï¼ˆæ—¶é—´ç³»ç»Ÿï¼‰
* **Event Bus**ï¼ˆäº‹ä»¶ç³»ç»Ÿï¼‰
* **Actor Framework**ï¼ˆæ ¸å¿ƒï¼šè¡Œä¸º / çŠ¶æ€ / æ›´æ–°å¾ªç¯ï¼‰
* **Action Engine**ï¼ˆè¡Œä¸ºæ³¨å†Œä¸æ‰§è¡Œï¼‰
* **State System**ï¼ˆå±æ€§ç®¡ç†ï¼‰
* **System Registry**ï¼ˆæ‰©å±•ç³»ç»Ÿæ³¨å†Œå™¨ï¼‰
* **UI Framework**ï¼ˆUI åŒºåŸŸã€æ’æ§½ã€å¸ƒå±€æ¥å£ï¼‰
* **Save / Load**ï¼ˆå­˜æ¡£ï¼‰
* **Randomness Seed**ï¼ˆå¯å¤ç°éšæœºï¼‰
* **Asset Loader**ï¼ˆèµ„æºåŠ è½½ï¼‰

### â­ Actor / Agent ç³»ç»Ÿï¼ˆæœ€æ ¸å¿ƒï¼‰

```ts
ActorBase {
  attributes: DynamicFields
  inventory: Item[]
  tags: string[]
  
  update(context): void
  available_actions(): Action[]
}
```

**æ‰€æœ‰è§’è‰²å‡ç»§æ‰¿è‡ª ActorBaseï¼š**

* ç©å®¶ï¼ˆPlayerï¼‰
* NPC
* é‡‘èå¸‚åœºå‚ä¸è€…
* ä¿®ä»™è€…
* ç›‘ç‹±å›šçŠ¯
* ä¸§å°¸ã€é‡å…½ç­‰ mobs

---

## ğŸŸ§ ç¬¬ 2 å±‚ï¼šExtensionsï¼ˆé€»è¾‘æ‰©å±•åŒ…å±‚ï¼‰

æ‰€æœ‰ä¸–ç•Œé€»è¾‘ã€è§„åˆ™ã€ç³»ç»Ÿï¼Œéƒ½å¿…é¡»åœ¨æ‰©å±•åŒ…ä¸­å®ç°ã€‚
**å¼•æ“æ ¸å¿ƒæ°¸ä¸åŒ…å«é¢†åŸŸé€»è¾‘ï¼**

### â­ æ¯ä¸ª Extension åŒ…å«ï¼š

```
extension/
  manifest.json
  attributes/
  actions/
  systems/
  ui/
  events/
  strategies/
```

#### å†…å®¹è¯´æ˜

* **attributes/**ï¼šä¸º Actor å¢åŠ é¢†åŸŸç‰¹å®šå±æ€§
* **actions/**ï¼šäº¤æ˜“ã€ä¿®ç‚¼ã€å†¥æƒ³ã€æ®´æ–—ã€ç¤¾äº¤ç­‰è¡Œä¸º
* **systems/**ï¼šè¡Œæƒ…ç³»ç»Ÿã€ä¿®ä»™å¢ƒç•Œç³»ç»Ÿã€ç›‘ç‹±å¸®æ´¾ç³»ç»Ÿç­‰
* **ui/**ï¼šåŠŸèƒ½ UIï¼ˆä½†ä¸å†³å®šæ ·å¼ï¼‰
* **events/**ï¼šé¢†åŸŸäº‹ä»¶
* **strategies/**ï¼šAI ç­–ç•¥ï¼ˆå¦‚äº¤æ˜“ç­–ç•¥ã€ä¿®ä»™AIã€ç›‘ç‹±ç”Ÿå­˜AIï¼‰

---

### â­ ç¤ºä¾‹æ‰©å±•åŒ…

### Finance Extension

* MarketSystem
* PriceModel
* TradeActions
* FinancialAgents
* è´¢æŠ¥ UIï¼ˆç»“æ„ï¼Œæ ·å¼ç”±çš®è‚¤å†³å®šï¼‰

### Cultivation Extension

* RealmSystem
* MeditationAction
* Qi å±æ€§
* çµæ ¹åˆ†ç±»

### Prison Extension

* BlackMarket
* Survival
* GangRelation

### LifeEvents Extension

* éšæœºäº‹ä»¶
* äººç”ŸèŠ‚ç‚¹ï¼ˆç”Ÿæ—¥ã€ç–¾ç—…ã€ç¤¾äº¤ï¼‰

### Combat Extension

* æˆ˜æ–—è¡Œä¸º
* æŠ€èƒ½ç³»ç»Ÿ
* ä¼¤å®³å…¬å¼

---

### â­ Extension å¯å¤šé‡åŠ è½½ï¼ˆæ¨¡å—ç»„åˆï¼‰

```json
{
  "extensions": [
    "Finance",
    "Career",
    "LifeEvents",
    "Relation",
    "UICharts",
    "Cultivation"
  ]
}
```

---

## ğŸŸ© ç¬¬ 3 å±‚ï¼šSeedï¼ˆä¸–ç•Œå®šä¹‰å±‚ï¼‰

Seed = ä¸–ç•Œæœ¬ä½“å®šä¹‰ï¼ˆä¸–ç•Œè§‚ã€è§„åˆ™ã€åˆå§‹è§’è‰²ï¼‰
ä¸åŒ…å«ç³»ç»Ÿé€»è¾‘ï¼Œåªåšé…ç½®ã€‚

### Seed ç»“æ„

```
seed/
  meta.json
  world.json
  actors.json
  events.json
  rules.json
  ui_layout.json   (å¯é€‰)
  assets/
```

### â­ Seed å†…å®¹å®šä¹‰

#### 1. ä¸–ç•Œè®¾ç½®ï¼ˆWorld Settingsï¼‰

* æ—¶é—´å•ä½ï¼ˆå¤©/å¹´/å¿ƒæ³•æ—¶åˆ»/å›åˆï¼‰
* åˆå§‹ç¯å¢ƒ
* æ˜¯å¦ä½¿ç”¨å¸‚åœº / ä¿®ä»™ / é»‘å¸‚ / æˆ˜æ–—ç³»ç»Ÿ

#### 2. Actor åˆå§‹é…ç½®

* ä¸»è§’
* NPC
* å¸‚åœºå‚ä¸è€…
* mobsï¼ˆä¸§å°¸ã€çµå…½ã€å›šçŠ¯ï¼‰

#### 3. ä¸–ç•Œè§„åˆ™ï¼ˆRulesï¼‰

* èµ„æºç³»ç»Ÿ
* æ”¶å…¥æœºåˆ¶
* æ³•å¾‹ç³»ç»Ÿï¼ˆå¦‚æ˜¯å¦å…è®¸ insider tradingï¼‰
* ä¿®ä»™è§„åˆ™
* é»‘å¸‚è§„åˆ™

#### 4. äº‹ä»¶ç³»ç»Ÿ

* éšæœºäº‹ä»¶
* å‰§æƒ…äº‹ä»¶
* å¤šåˆ†æ”¯
* å¸‚åœºäº‹ä»¶
* å¥‡é‡
* ç›‘ç‹±çªå‘

#### 5. UI å¸ƒå±€ï¼ˆéæ ·å¼ï¼‰

* å“ªäº› UI é¢æ¿æ”¾åœ¨å“ªä¸ªæ’æ§½

è®¾è®¡å¸ˆå¯è‡ªå®šä¹‰ï¼Œä½†ä¸è¦†ç›–æ ·å¼ã€‚

---

## ğŸŸ¦ ç¬¬ 4 å±‚ï¼šUI Skin Packï¼ˆçš®è‚¤å±‚ï¼‰

**UI Skin = çº¯è§†è§‰å±‚ï¼Œä¸åŒ…å«ä¸–ç•Œé€»è¾‘ï¼Œä¹Ÿä¸ä¾èµ– Seed å†…å®¹ã€‚**

### UI Skin ç»“æ„

```
skin/
  theme.json
  icons/
  backgrounds/
  animation/
  layout.json
```

### UI Skin è¦†ç›–ä¼˜å…ˆçº§

**Engine < Extension < Seed < UI Skinï¼ˆæœ€é«˜ï¼‰**

### ä¼˜åŠ¿

* ä¸åŒ Seed å¯å…±ç”¨åŒä¸€çš®è‚¤
* UI åˆ›ä½œè€…å¯å•ç‹¬åˆ›ä½œ
* å•†ä¸šçš®è‚¤ DLC æ½œåŠ›å·¨å¤§
* å…è®¸â€œSteam Workshop çº§åˆ«â€çš„çš®è‚¤ç”Ÿæ€

---

## ğŸŸ« éšå«å±‚ï¼šToken Identity Systemï¼ˆäººç”Ÿè®°å½•ç³»ç»Ÿï¼‰

ç‹¬ç«‹æ¨¡å—ï¼Œç”¨äºè·¨ Seed ä¿å­˜ç©å®¶äººç”Ÿè½¨è¿¹ã€‚

åŒ…å«ï¼š

* æˆå°±æ ‘
* æ¸¸ç©æ—¥å¿—
* run å°ç»“
* Seed å®Œæˆåº¦
* éšç§æ¨¡å¼
* æœ¬åœ°/äº‘ç«¯åŒæ­¥

**ä¸å½±å“å¼•æ“è¿è¡Œï¼Œå±äº loosely coupled æ¨¡å—ã€‚**

---

## ğŸŸª è¿è¡Œé¡ºåºï¼ˆRuntime Execution Pipelineï¼‰

```
1. Load Engine Core
2. Load Extensions (æ ¹æ® seed/extension åˆ—è¡¨)
3. è§£æä¾èµ– & å†²çª
4. åŠ è½½ Seedï¼ˆworld/actors/eventsï¼‰
5. åŠ è½½ UI Skinï¼ˆæœ€ç»ˆä¸»é¢˜ä¸å¸ƒå±€ï¼‰
6. åˆå§‹åŒ–ä¸–ç•Œ
7. ç”Ÿæˆ Actors
8. å¯åŠ¨æ—¶é—´å¼•æ“
9. Update Systemsï¼ˆæ‰©å±•åŒ…ç³»ç»Ÿï¼‰
10. Update Actorsï¼ˆAI + ç©å®¶è¡Œä¸ºï¼‰
11. Trigger Eventsï¼ˆäº‹ä»¶è§¦å‘ï¼‰
12. æ¸²æŸ“ UI
13. Token æ—¥å¿—åŒæ­¥
14. ä¸‹ä¸€ Tick
```

---

## â­ æ•´ä½“æ¶æ„å›¾ï¼ˆæ–‡å­—ç‰ˆï¼‰

```
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
               Engine Core
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 Time | EventBus | ActorBase | State | Action | UI Framework | Save
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           Extensions (å¯è£…å¤šä¸ª)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 Finance | Cultivation | Prison | Combat | LifeEvents | Relation ...
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                   Seed
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 world.json | actors.json | events.json | rules.json | seed-ui.json
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                  UI Skin
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 theme.json | icons | backgrounds | layout.json
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
              Token Identity
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 achievement.json | run_log | sync module
```

---

## â­ ç”Ÿæ€ç³»ç»Ÿï¼ˆEcosystemï¼‰

å¼•æ“æ”¯æŒä¸‰ç±»åˆ›ä½œè€…ï¼Œå½¢æˆå®Œæ•´ç”Ÿæ€ï¼š

### â‘  Seed åˆ›ä½œè€…ï¼ˆä¸–ç•Œæè¿°è€…ï¼‰

* åˆ›é€ æ•…äº‹
* ä¸–ç•Œè§„åˆ™
* ç³»ç»Ÿç»„åˆ
* äº‹ä»¶æ ‘
* è§’è‰²é…ç½®

### â‘¡ UI Skin åˆ›ä½œè€…ï¼ˆç¾æœ¯/è§†è§‰è®¾è®¡ï¼‰

* å›¾æ ‡
* èƒŒæ™¯
* åŠ¨ç”»
* å­—ä½“
* ä¸»é¢˜çš®è‚¤
* å¸ƒå±€è¦†ç›–

### â‘¢ Extension å¼€å‘è€…ï¼ˆç³»ç»Ÿå·¥ç¨‹å¸ˆï¼‰

* é‡‘èæ¨¡å‹
* ä¿®ä»™ç³»ç»Ÿ
* æˆ˜æ–—ç³»ç»Ÿ
* ç›‘ç‹±ç”Ÿå­˜ç³»ç»Ÿ
* AI ç­–ç•¥
* ç¤¾ä¼šå…³ç³»ç³»ç»Ÿ

ä¸‰è€…äº’ä¸ä¾èµ– â†’ æœ€å¤§åŒ–ç”Ÿæ€ç¹è£ã€‚
